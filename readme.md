# Research-RL

This repository contains research code and data for reinforcement learning (RL) applied to dog nutrition and meal planning. It includes RL implementations (PPO, DQN, Q-learning), environment definitions, and scripts for nutritional data management using MongoDB.

## Project Structure

```
PPO-IMPL/
    main.py
    ppo_torch.py
    requirements.txt
    utils.py
    .vscode/
server/
    breed-size-dataInsert.py
    health-mineral-dataInsert.py
    health-vitamin-dataInsert.py
    meal-rule-engine.py
    nutrition-carb-dataInsert.py
    nutrition-dairy-dataInsert.py
    nutrition-fat-dataInsert.py
    nutrition-protein-dataInsert.py
    nutrition-veg-dataInsert.py
dockerfile
other/
    dqn-modal.py
    final-rl-modal-backup.py
    optimize-meal-plan.py
    ...
plots/
    cartpole.png
```

## Main Components

### PPO-IMPL

- [`PPO-IMPL/main.py`](PPO-IMPL/main.py): Entry point for training a PPO agent in a custom environment for meal planning and nutrition.
- [`PPO-IMPL/ppo_torch.py`](PPO-IMPL/ppo_torch.py): PPO agent, actor/critic networks, and memory buffer implementations (PyTorch).
- [`PPO-IMPL/utils.py`](PPO-IMPL/utils.py): Utility for plotting learning curves.
- [`PPO-IMPL/requirements.txt`](PPO-IMPL/requirements.txt): Python dependencies (PyTorch, Gym, NumPy, Matplotlib).

### Server (Data Management)

- [`server/meal-rule-engine.py`](server/meal-rule-engine.py): Rule-based engine for calculating nutritional requirements for dogs based on breed, age, activity, and health status. Connects to MongoDB for data.
- Data insert scripts (for MongoDB collections):
  - [`server/breed-size-dataInsert.py`](server/breed-size-dataInsert.py): Inserts dog breed and size data.
  - [`server/health-vitamin-dataInsert.py`](server/health-vitamin-dataInsert.py): Inserts vitamin requirements.
  - [`server/health-mineral-dataInsert.py`](server/health-mineral-dataInsert.py): Inserts mineral requirements.
  - [`server/nutrition-*-dataInsert.py`](server/): Insert scripts for protein, fat, carb, dairy, and vegetable data.

### Other RL Approaches & Utilities

- [`other/dqn-modal.py`](other/dqn-modal.py): DQN agent and reward function for meal planning.
- [`other/optimize-meal-plan.py`](other/optimize-meal-plan.py): Q-learning optimization for meal plans.
- [`other/final-rl-modal-backup.py`](other/final-rl-modal-backup.py): Q-learning for weekly meal plan generation.
- Additional scripts and backups for experimentation.

### Plots

- [`plots/cartpole.png`](plots/cartpole.png): Example plot generated by PPO training.

## Getting Started

### Prerequisites

- Python 3.10
- MongoDB Atlas account (or local MongoDB instance)
- Docker (optional, for containerized runs)

### Installation

1. Clone the repository.
2. Install dependencies:
   ```sh
   pip install -r PPO-IMPL/requirements.txt
   ```
3. Set up MongoDB and update connection strings if needed.

### Running PPO Training

You can run the PPO training loop (with interactive input for environment state):

```sh
python PPO-IMPL/main.py
```

Or using Docker:

```sh
docker build -t research-rl .
docker run -it research-rl
```

### Inserting Data into MongoDB

Run the scripts in the `server/` directory to populate the database:

```sh
python server/breed-size-dataInsert.py
python server/health-vitamin-dataInsert.py
python server/health-mineral-dataInsert.py
python server/nutrition-protein-dataInsert.py
python server/nutrition-fat-dataInsert.py
python server/nutrition-carb-dataInsert.py
python server/nutrition-dairy-dataInsert.py
python server/nutrition-veg-dataInsert.py
```

### Rule Engine

To calculate nutritional requirements and print recommendations based on a sample dog profile, run:

```sh
python server/meal-rule-engine.py
```

## Notes

- The RL environments are interactive and require user input for state transitions.
- MongoDB must be accessible for data scripts and the rule engine to function.
- The codebase contains experimental and backup scripts in the `other/` directory.

## License

This project is for research and educational purposes.

---

For more details, see the source code in each directory.
